<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>15 Runtime Database Access</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- xhtml,2,html --> 
<meta name="src" content="AppDevGuide.tex" /> 
<meta name="date" content="2015-11-06 12:47:00" /> 
<link rel="stylesheet" type="text/css" href="AppDevGuide.css" /> 
</head><body 
>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="AppDevGuidech16.html" >next</a>] [<a 
href="AppDevGuidech14.html" >prev</a>] [<a 
href="AppDevGuidech14.html#tailAppDevGuidech14.html" >prev-tail</a>] [<a 
href="#tailAppDevGuidech15.html">tail</a>] [<a 
href="AppDevGuide.html#AppDevGuidech15.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;15</span><br /><a 
 id="x17-60600015"></a>Runtime Database Access</h2> <a 
 id="dx17-606001"></a>
<h3 class="sectionHead"><span class="titlemark">15.1    </span> <a 
 id="x17-60700015.1"></a>Overview</h3>
<!--l. 7--><p class="noindent" >This chapter describes routines for manipulating and accessing an initialized IOC database.
</p><!--l. 9--><p class="noindent" >This chapter is divided into several sections:
</p>
     <ul class="itemize1">
     <li class="itemize">Database related include files. All of interest are listed and those of general interest are discussed briefly.
     </li>
     <li class="itemize">Runtime database access overview.
     </li>
     <li class="itemize">Description of each runtime database access routine.
     </li>
     <li class="itemize">Runtime modification of link fields.
     </li>
     <li class="itemize">Lock Set Routines
     </li>
     <li class="itemize">Database to Channel Access Routines
     </li></ul>
<!--l. 28--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.2    </span> <a 
 id="x17-60800015.2"></a>Database Include Files</h3>
<!--l. 30--><p class="noindent" >There are a number of database related include files. Of particular interest to this chapter are:
</p>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-608001"></a>dbDefs.h: Miscellaneous database related definitions.
     </li>
     <li class="itemize"><a 
 id="dx17-608002"></a>dbFldTypes.h: Field type definitions.
     </li>
     <li class="itemize"><a 
 id="dx17-608003"></a>dbAccess.h: Runtime database access definitions.
     </li>
     <li class="itemize"><a 
 id="dx17-608004"></a>dbServer.h: API for server implementers.
     </li>
     <li class="itemize"><a 
 id="dx17-608005"></a>link.h: Definitions for link fields.
                                                                                         
                                                                                         
     </li></ul>
<!--l. 47--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.2.1    </span> <a 
 id="x17-60900015.2.1"></a>dbDefs.h</h4>
<a 
 id="dx17-609001"></a>
<!--l. 50--><p class="noindent" >This file contains a number of database related definitions. The most important are:
</p>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-609002"></a>PVNAME_STRINGSZ: The number of characters reserved for the record name, including the terminating zero
     byte.
     </li>
     <li class="itemize"><a 
 id="dx17-609003"></a>PVNAME_SZ: The maximum number of characters allowed in the record name.
     </li>
     <li class="itemize"><a 
 id="dx17-609004"></a>DB_MAX_CHOICES: The maximum number of choices for a choice field.
     </li></ul>
<!--l. 63--><p class="noindent" >Note that <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DB_MAX_CHOICES</span></span></span> applies for code using the runtime routines documented in this chapter, but for Channel Access
clients the maximum number of choices and their choice string length are different, and are defined in the db_access.h
file.
</p><!--l. 65--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.2.2    </span> <a 
 id="x17-61000015.2.2"></a>dbFldTypes.h</h4>
<a 
 id="dx17-610001"></a>
<!--l. 68--><p class="noindent" >This file defines the possible field types. A field&#8217;s type is perhaps its most important attribute. Changing the possible field types
is a fundamental change to the IOC software, because many IOC software components are aware of the field
types.
</p><!--l. 72--><p class="noindent" >The field types are:
</p>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-610002"></a>DBF_STRING: 40 character ASCII string
     </li>
     <li class="itemize"><a 
 id="dx17-610003"></a>DBF_CHAR: Signed character
     </li>
     <li class="itemize"><a 
 id="dx17-610004"></a>DBF_UCHAR: Unsigned character
     </li>
     <li class="itemize"><a 
 id="dx17-610005"></a>DBF_SHORT: Short integer
     </li>
     <li class="itemize"><a 
 id="dx17-610006"></a>DBF_USHORT: Unsigned short integer
                                                                                         
                                                                                         
     </li>
     <li class="itemize"><a 
 id="dx17-610007"></a>DBF_LONG: Long integer
     </li>
     <li class="itemize"><a 
 id="dx17-610008"></a>DBF_ULONG: Unsigned long integer
     </li>
     <li class="itemize"><a 
 id="dx17-610009"></a>DBF_FLOAT: Floating point number
     </li>
     <li class="itemize"><a 
 id="dx17-610010"></a>DBF_DOUBLE: Double precision float
     </li>
     <li class="itemize"><a 
 id="dx17-610011"></a>DBF_ENUM: An enumerated field
     </li>
     <li class="itemize"><a 
 id="dx17-610012"></a>DBF_MENU: A menu choice field
     </li>
     <li class="itemize"><a 
 id="dx17-610013"></a>DBF_DEVICE: A device choice field
     </li>
     <li class="itemize"><a 
 id="dx17-610014"></a>DBF_INLINK: Input Link
     </li>
     <li class="itemize"><a 
 id="dx17-610015"></a>DBF_OUTLINK: Output Link
     </li>
     <li class="itemize"><a 
 id="dx17-610016"></a>DBF_FWDLINK: Forward Link
     </li>
     <li class="itemize"><a 
 id="dx17-610017"></a>DBF_NOACCESS: A private field for use by record access routines
     </li></ul>
<!--l. 110--><p class="noindent" >A field of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_STRING</span></span></span>, ..., <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_DOUBLE</span></span></span> can be a scalar or an array. A <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_STRING</span></span></span> field contains a
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">NULL</span></span></span> terminated ascii string. The field types <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_CHAR</span></span></span>, ..., <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_DOUBLE</span></span></span> correspond to the standard C data
types.
</p><!--l. 114--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_ENUM</span></span></span> is used for enumerated items, which is analogous to the C language enumeration. An example of an enum field is
field <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">VAL</span></span></span> of a multi bit binary record.
</p><!--l. 117--><p class="noindent" >The field types <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_ENUM</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_MENU</span></span></span>, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_DEVICE</span></span></span> all have an associated set of ASCII strings defining the choices.
For a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_ENUM</span></span></span>, the record support module supplies values and thus are not available for static database access. The database
access routines locate the choice strings for the other types.
</p><!--l. 121--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_INLINK</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_OUTLINK</span></span></span> specify link fields. A link field can refer to a signal located in a hardware module, to a field
located in a database record in the same IOC, or to a field located in a record in another IOC. A <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_FWDLINK</span></span></span> can only refer
to a record in the same IOC. Link fields are described in a later chapter.
</p><!--l. 126--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_INLINK</span></span></span> (input), <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_OUTLINK</span></span></span> (output), and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_FWDLINK</span></span></span> (forward) specify that the field is a link structure as
defined in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">link.h</span></span></span>. There are three classes of links:
</p><!--l. 129--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x17-610019x1">Constant - The value associated with the field is a floating point value initialized with a constant value. This is
     somewhat of a misnomer because constant link fields can be modified via <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> or <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutLink</span></span></span>.
     </li>
     <li 
  class="enumerate" id="x17-610021x2">Hardware links - The link contains a data structure which describes a signal connected to a particular hardware
     bus. See <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">link.h</span></span></span> for a description of the bus types currently supported.
                                                                                         
                                                                                         
     </li>
     <li 
  class="enumerate" id="x17-610023x3">Process Variable Links - This is one of three types:
     <!--l. 139--><p class="noindent" >
         </p><ol  class="enumerate2" >
         <li 
  class="enumerate" id="x17-610025x1">PV_LINK: The process variable name.
         </li>
         <li 
  class="enumerate" id="x17-610027x2">DB_LINK: A reference to a process variable in the same IOC.
         </li>
         <li 
  class="enumerate" id="x17-610029x3">CA_LINK: A reference to a variable located in another IOC.
         </li></ol>
     </li></ol>
<!--l. 151--><p class="noindent" >When first loaded the field is always creates as a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">PV_LINK</span></span></span>. When the IOC is initialized each <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">PV_LINK</span></span></span> is converted either to a
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DB_LINK</span></span></span> or a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">CA_LINK</span></span></span>.
</p><!--l. 154--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_NOACCESS</span></span></span> fields are for private use by record processing routines.
</p><!--l. 156--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.2.3    </span> <a 
 id="x17-61100015.2.3"></a>dbAccess.h</h4>
<!--l. 158--><p class="noindent" >This file is the interface definition for the run time database access library, i.e. for the routines described in this
chapter.
</p><!--l. 160--><p class="noindent" >An important structure defined in this header file is <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBADDR</span></span></span>
</p>
<!--l. 162-->
     <div class="lstlisting" id="listing-228"><span class="label"><a 
 id="x17-611001r1"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">address</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">record</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">pfield</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">address</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">field</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">pfldDes</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">address</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">struct</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">fldDes</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">asPvt</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">Access</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">Security</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">Private</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611006r6"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">no_elements</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">(</span><span 
class="pcrro7t-">arrays</span><span 
class="pcrro7t-">)</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611007r7"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">field_type</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">type</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">database</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">field</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611008r8"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">field_size</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">size</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">(</span><span 
class="pcrro7t-">bytes</span><span 
class="pcrro7t-">)</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">the</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">field</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611009r9"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">special</span><span 
class="pcrr7t-">;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">special</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">processing</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611010r10"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbr_field_type</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">optimal</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">database</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">request</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">type</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-611011r11"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">DBADDR</span><span 
class="pcrr7t-">;</span>
     
</div>
<a 
 id="dx17-611012"></a>
<a 
 id="dx17-611013"></a>
<a 
 id="dx17-611014"></a>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-611015"></a>precord: Address of record. Note that its type is a pointer to a structure defining the fields common to all record
     types. The common fields appear at the beginning of each record. A record support module can cast <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">precord</span></span></span>
     to point to the specific record type.
     </li>
     <li class="itemize"><a 
 id="dx17-611016"></a>pfield: Address of the field within the record. Note that <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pfield</span></span></span> provides direct access to the data value.
     </li>
     <li class="itemize"><a 
 id="dx17-611017"></a>pfldDes: This points to a structure containing all details concerning the field. See Chapter &#8220;Database Structures&#8221;
     for details.
     </li>
     <li class="itemize"><a 
 id="dx17-611018"></a>asPvt: A field used by access security.
                                                                                         
                                                                                         
     </li>
     <li class="itemize"><a 
 id="dx17-611019"></a>no_elements: A string or numeric field can be either a scalar or an array. For scalar fields <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">no_elements</span></span></span> has
     the value 1. For array fields it is the maximum number of elements that can be stored in the array.
     </li>
     <li class="itemize"><a 
 id="dx17-611020"></a>field_type: Field type.
     </li>
     <li class="itemize"><a 
 id="dx17-611021"></a>field_size: Size of one element of the field.
     </li>
     <li class="itemize"><a 
 id="dx17-611022"></a>special: Some fields require special processing. This specifies the type. Special processing is described later in
     this manual.
     </li>
     <li class="itemize"><a 
 id="dx17-611023"></a>dbr_field_type:  This  specifies  the  optimal  database  request  type  for  this  field,  i.e.  the  request  type  that  will
     require the least CPU overhead.
     </li></ul>
<!--l. 211--><p class="noindent" >NOTE: <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pfield</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">no_elements</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">field_type</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">field_size</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">special</span></span></span>, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbr_field_type</span></span></span> can all be set by
record support (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">cvt_dbaddr</span></span></span>). Thus <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">field_type</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">field_size</span></span></span>, and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">special</span></span></span> can differ from that specified by
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pfldDes</span></span></span>.
</p><!--l. 216--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.2.4    </span> <a 
 id="x17-61200015.2.4"></a>dbServer.h</h4>
<!--l. 218--><p class="noindent" >This header provides an optional API allowing the IOC to display information about the services that are connecting to and
using the IOC.
</p><!--l. 220--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.2.5    </span> <a 
 id="x17-61300015.2.5"></a>link.h</h4>
<!--l. 222--><p class="noindent" >This header file describes the various types of link fields supported by EPICS.
</p><!--l. 224--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.3    </span> <a 
 id="x17-61400015.3"></a>Runtime Database Access Overview</h3>
<!--l. 226--><p class="noindent" >With the exception of record and device support, all access to the database is via the database access routines. Even record
support routines access other records only via database or channel access. Channel Access, in turn, accesses the database via
database access. Other services can similarly be layered on top of the IOC, using database access to manipulate record field
values and cause records to be processed.
</p><!--l. 231--><p class="noindent" >Perhaps the easiest way to describe the database access layer is to list and briefly describe the set of routines that constitute
database access. This provides a good look at the facilities provided by the database.
                                                                                         
                                                                                         
</p><!--l. 234--><p class="noindent" >Before describing database access, one caution must be mentioned. The usual way to communicate with an
IOC database from outside the IOC is via Channel Access, although other similar network server layers can be
added. Most client applications should communicate with the database via Channel Access, not via database
access, even if they reside in the same IOC process as the database. Since Channel Access provides network
independent access to a database, it must ultimately call database access routines. The database access interface
was enhanced in 1991, but Channel Access could not be changed to use the new interface as this would break
existing client applications. Instead a module was written which translates the original database access API
into the new API. This interface between the old and new style database access calls is not discussed in this
manual.
</p><!--l. 242--><p class="noindent" >The <a 
 id="dx17-614001"></a>database access routines are:
</p>
     <ul class="itemize1">
     <li class="itemize">dbNameToAddr: Locate a database variable.
     </li>
     <li class="itemize">dbGetField: Get values associated with a database variable.
     </li>
     <li class="itemize">dbGetLink: Get value of field referenced by database link (Macro)
     </li>
     <li class="itemize">dbGetLinkValue: Get value of field referenced by database link (Subroutine)
     </li>
     <li class="itemize">dbGet: Routine called by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetLinkValue</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span>
     </li>
     <li class="itemize">dbPutField: Change the value of a database variable.
     </li>
     <li class="itemize">dbPutLink: Change value referenced by database link (Macro)
     </li>
     <li class="itemize">dbPutLinkValue: Change value referenced by database link (Subroutine)
     </li>
     <li class="itemize">dbPut: Routine called by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutxxx</span></span></span> functions.
     </li>
     <li class="itemize">dbProcessNotify: Process a record and request notification on completion, together with optional pre-process
     put or post-process get.
     </li>
     <li class="itemize">dbNotifyCancel: Cancel a dbProcessNotify.
     </li>
     <li class="itemize">dbBufferSize: Determine number of bytes in request buffer.
     </li>
     <li class="itemize">dbValueSize: Number of bytes for a value field.
     </li>
     <li class="itemize">dbGetRset: Get pointer to Record Support Entry Table
     </li>
     <li class="itemize">dbIsValueField: Is this field the VAL field.
     </li>
     <li class="itemize">dbGetFieldIndex: Get field index. The first field in a record has index 0.
                                                                                         
                                                                                         
     </li>
     <li class="itemize">dbGetNelement: Get number of elements in the field
     </li>
     <li class="itemize">dbIsLinkConnected: Is the link field connected.
     </li>
     <li class="itemize">dbGetLinkDBFtype: Get field type of link.
     </li>
     <li class="itemize">dbGetControlLimits: Get Control Limits.
     </li>
     <li class="itemize">dbGetGraphicLimits: Get Graphic Limits.
     </li>
     <li class="itemize">dbGetAlarmLimits: Get Alarm Limits
     </li>
     <li class="itemize">dbGetPrecision: Get Precision
     </li>
     <li class="itemize">dbGetUnits: Get Units
     </li>
     <li class="itemize">dbGetNelements: Get Number of Elements
     </li>
     <li class="itemize">dbGetSevr: Get Severity
     </li>
     <li class="itemize">dbGetTimeStamp: Get Time Stamp
     </li>
     <li class="itemize">dbPutAttribute Give a value to a record attribute.
     </li>
     <li class="itemize">dbScanPassive: Process record if it is passive.
     </li>
     <li class="itemize">dbScanLink: Process record referenced by link if it is passive.
     </li>
     <li class="itemize">dbProcess: Process Record
     </li>
     <li class="itemize">dbScanFwdLink: Scan a forward link.
     </li></ul>
<!--l. 313--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.3.1    </span> <a 
 id="x17-61500015.3.1"></a>Database Request Types and Options</h4>
<!--l. 315--><p class="noindent" >Before describing database access structures, it is necessary to describe database request types and request options. When
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> or <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> are called one of the arguments is a database request type. This argument has one of the
following values:
</p>
                                                                                         
                                                                                         
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-615001"></a>DBR_STRING: Value is a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">NULL</span></span></span> terminated string
     </li>
     <li class="itemize"><a 
 id="dx17-615002"></a>DBR_CHAR: Value is a signed char
     </li>
     <li class="itemize"><a 
 id="dx17-615003"></a>DBR_UCHAR: Value is an unsigned char
     </li>
     <li class="itemize"><a 
 id="dx17-615004"></a>DBR_SHORT: Value is a short integer
     </li>
     <li class="itemize"><a 
 id="dx17-615005"></a>DBR_USHORT: Value is an unsigned short integer
     </li>
     <li class="itemize"><a 
 id="dx17-615006"></a>DBR_LONG: Value is a long integer
     </li>
     <li class="itemize"><a 
 id="dx17-615007"></a>DBR_ULONG: Value is an unsigned long integer
     </li>
     <li class="itemize"><a 
 id="dx17-615008"></a>DBR_FLOAT: Value is an IEEE floating point value
     </li>
     <li class="itemize"><a 
 id="dx17-615009"></a>DBR_DOUBLE: Value is an IEEE double precision floating point value
     </li>
     <li class="itemize"><a 
 id="dx17-615010"></a>DBR_ENUM: Value is a short which is the enum item
     </li>
     <li class="itemize"><a 
 id="dx17-615011"></a>DBR_PUT_ACKT: Value is an unsigned short for setting the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ACKT</span></span></span>.
     </li>
     <li class="itemize"><a 
 id="dx17-615012"></a>DBR_PUT_ACKS: Value is an unsigned short for global alarm acknowledgment.
     </li></ul>
<!--l. 347--><p class="noindent" >The request types <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_STRING</span></span></span>,..., <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_DOUBLE</span></span></span> correspond exactly to the database field data types. <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_ENUM</span></span></span> is used for
database fields that represent a set of choices or options. It is used for access to fields of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_ENUM</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_DEVICE</span></span></span>, and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF_MENU</span></span></span>. The complete set of database field types are defined in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbFldTypes.h</span></span></span>. The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_PUT_ACKT</span></span></span> and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_PUT_ACKS</span></span></span> requests are used to perform global alarm acknowledgment.
</p><!--l. 353--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> also accepts argument options which is a mask containing a bit for each additional type of information the caller
desires. The complete set of options is:
</p>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-615013"></a>DBR_STATUS: returns the alarm status and severity
     </li>
     <li class="itemize"><a 
 id="dx17-615014"></a>DBR_UNITS: returns a string specifying the engineering units
     </li>
     <li class="itemize"><a 
 id="dx17-615015"></a>DBR_PRECISION: returns a long integer specifying floating point precision.
     </li>
     <li class="itemize"><a 
 id="dx17-615016"></a>DBR_TIME: returns the time
     </li>
     <li class="itemize"><a 
 id="dx17-615017"></a>DBR_ENUM_STRS: returns an array of strings
                                                                                         
                                                                                         
     </li>
     <li class="itemize"><a 
 id="dx17-615018"></a>DBR_GR_LONG: returns graphics info as long values
     </li>
     <li class="itemize"><a 
 id="dx17-615019"></a>DBR_GR_DOUBLE: returns graphics info as double values
     </li>
     <li class="itemize"><a 
 id="dx17-615020"></a>DBR_CTRL_LONG: returns control info as long values
     </li>
     <li class="itemize"><a 
 id="dx17-615021"></a>DBR_CTRL_DOUBLE: returns control info as double values
     </li>
     <li class="itemize"><a 
 id="dx17-615022"></a>DBR_AL_LONG: returns alarm info as long values
     </li>
     <li class="itemize"><a 
 id="dx17-615023"></a>DBR_AL_DOUBLE: returns alarm info as double values
     </li></ul>
<!--l. 382--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.3.2    </span> <a 
 id="x17-61600015.3.2"></a>Options</h4>
<!--l. 384--><p class="noindent" >Example
</p><!--l. 386--><p class="noindent" >The file <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAccess.h</span></span></span> contains macros for using options. A brief example should show how they are used. The following
example defines a buffer to accept an array of up to ten float values. In addition it contains fields for options <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_STATUS</span></span></span> and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_TIME</span></span></span>.
</p>
<!--l. 391-->
     <div class="lstlisting" id="listing-229"><span class="label"><a 
 id="x17-616001r1"></a></span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">buffer</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBRstatus</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBRtime</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">float</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">value</span><span 
class="pcrr7t-">[10];</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616005r5"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">buffer</span><span 
class="pcrr7t-">;</span>
     
</div>
<!--l. 399--><p class="noindent" >The associated <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> call is:
</p>
<!--l. 401-->
     <div class="lstlisting" id="listing-230"><span class="label"><a 
 id="x17-616006r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">number_elements</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616007r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">...</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616008r3"></a></span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBR_STATUS</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">|</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBR_TIME</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616009r4"></a></span><span 
class="pcrr7t-">number_elements</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">10;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-616010r5"></a></span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetField</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">DBR_FLOAT</span><span 
class="pcrr7t-">,&amp;</span><span 
class="pcrr7t-">buffer</span><span 
class="pcrr7t-">,&amp;</span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">,&amp;</span><span 
class="pcrr7t-">number_elements</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 409--><p class="noindent" >Consult <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAccess.h</span></span></span> for a complete list of macros.
</p><!--l. 411--><p class="noindent" >Structure <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr</span></span></span> contains a field <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbr_field_type</span></span></span>. This field holds the database request type that most closely matches
the database field type. Using this request type will put the smallest load on the IOC.
                                                                                         
                                                                                         
</p><!--l. 415--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.3.3    </span> <a 
 id="x17-61700015.3.3"></a>ACKT and ACKS</h4>
<a 
 id="dx17-617001"></a>
<a 
 id="dx17-617002"></a>
<!--l. 419--><p class="noindent" >The request types <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_PUT_ACKT</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_PUT_ACKS</span></span></span> are used for global alarm acknowledgment. The alarm handler uses
these requests. For each of these types the user (normally channel access) passes an unsigned short value. This value
represents:
     </p><dl class="description"><dt class="description">
<span 
class="ptmb7t-">DBR</span><span 
class="ptmb7t-">_PUT</span><span 
class="ptmb7t-">_ACKT</span> </dt><dd 
class="description"><a 
 id="dx17-617003"></a> - Do transient alarms have to be acknowledged? 0 means no, 1 means yes
     </dd><dt class="description">
<span 
class="ptmb7t-">DBR</span><span 
class="ptmb7t-">_PUT</span><span 
class="ptmb7t-">_ACKS</span> </dt><dd 
class="description">- The highest alarm severity to acknowledge. If the current alarm severity is less then or equal to
     this value the alarm is acknowledged.
     </dd></dl>
<!--l. 433--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.4    </span> <a 
 id="x17-61800015.4"></a>Database Access Routines</h3>
<!--l. 435--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.1    </span> <a 
 id="x17-61900015.4.1"></a>dbNameToAddr</h4>
<a 
 id="dx17-619001"></a>
<!--l. 438--><p class="noindent" >Locate a process variable, format:
</p>
<!--l. 440-->
     <div class="lstlisting" id="listing-231"><span class="label"><a 
 id="x17-619002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbNameToAddr</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-619003r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pname</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">process</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">variable</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">name</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-619004r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-619005"></a>
<!--l. 447--><p class="noindent" >The most important goal of database access can be stated simply: Provide quick access to database records and fields within
records. The basic rules are:
</p><!--l. 451--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x17-619007x1">Call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbNameToAddr</span></span></span> once and only once for each field to be accessed.
     </li>
     <li 
  class="enumerate" id="x17-619009x2">Read field values via <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> and write values via <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span>.
     </li></ol>
                                                                                         
                                                                                         
<!--l. 459--><p class="noindent" >The routines described in this subsection are used by channel access, sequence programs, etc. Record processing routines,
however, use the routines described in the next section rather then <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span>.
</p><!--l. 462--><p class="noindent" >Given a process variable name, this routine locates the process variable and fills in the fields of structure <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr</span></span></span>. The format
for an IOC process variable name is one of:
                                                                                         
                                                                                         
</p>
<div class="verbatim" id="verbatim-212">
<div class="fancyvrb" id="fancyvrb212"><a 
 id="x17-619011r1"></a>&#x00A0;&#x00A0;&#x003C;record_name&#x003E;<br class="fancyvrb" /><a 
 id="x17-619013r2"></a>&#x00A0;&#x00A0;&#x003C;record_name&#x003E;.<br class="fancyvrb" /><a 
 id="x17-619015r3"></a>&#x00A0;&#x00A0;&#x003C;record_name&#x003E;.&#x003C;field_name&#x003E;<br class="fancyvrb" /><a 
 id="x17-619017r4"></a>&#x00A0;&#x00A0;&#x003C;record_name&#x003E;.&#x003C;field_name&#x003E;&#x003C;modifier&#x003E;
<br class="fancyvrb" /><a 
 id="x17-619019r5"></a>&#x00A0;&#x00A0;&#x003C;record_name&#x003E;.&#x003C;modifier&#x003E;</div></div>
<!--l. 471--><p class="nopar" >
</p><!--l. 473--><p class="noindent" >For example the value field of a record with record named <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">sample_name</span></span></span> is:
</p><!--l. 475--><p class="noindent" >&#8220;<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">sample_name.VAL</span></span></span>&#8221;.
</p><!--l. 477--><p class="noindent" >The <span 
class="ptmri7t-">record</span><span 
class="ptmri7t-">_name </span>is case sensitive. The <span 
class="ptmri7t-">field</span><span 
class="ptmri7t-">_name</span>s available depend on the record type of the record and usually consist of all
upper-case letters. If omitted the field name <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">VAL</span></span></span> is used if it exists. Currently the only <span 
class="ptmri7t-">modifier </span>supported is a single
dollar sign <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">$</span></span></span> and is only valid on fields which are strings or links. Additional modifiers may be added in future
releases.
</p><!--l. 483--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbNameToAddr</span></span></span> locates a record via a process variable directory (PVD). It fills in a structure (<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr</span></span></span>) describing the field.
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr</span></span></span> contains the address of the record and also the field. Thus other routines can locate the record and field without a
search. Although the PVD allows the record to be located via a hash algorithm and the field within a record via a binary search,
it still takes about 80 microseconds (25MHz 68040) to located a process variable. Once located the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr</span></span></span> structure allows
the process variable to be accessed directly.
</p><!--l. 490--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.2    </span> <a 
 id="x17-62000015.4.2"></a>Get Routines</h4>
<!--l. 492--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.2.1    </span> <a 
 id="x17-62100015.4.2.1"></a>dbGetField</h5>
<!--l. 494--><p class="noindent" >Get values associated with a process variable, format:
</p>
<!--l. 496-->
     <div class="lstlisting" id="listing-232"><span class="label"><a 
 id="x17-621001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetField</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">returned</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">options</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621006r6"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-621007r7"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfl</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">used</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">monitor</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">routines</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-621008"></a>
<!--l. 507--><p class="noindent" >This routine locks, calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span>, and unlocks.
</p><!--l. 509--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.2.2    </span> <a 
 id="x17-62200015.4.2.2"></a>dbGetLink and dbGetLinkValue</h5>
<!--l. 511--><p class="noindent" >Get value from the field referenced by a database link, format:
</p>
                                                                                         
                                                                                         
<!--l. 513-->
     <div class="lstlisting" id="listing-233"><span class="label"><a 
 id="x17-622001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-622002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">db_link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">link</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">field</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-622003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-622004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">returned</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-622005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">options</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-622006r6"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">desired</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-622007"></a>
<a 
 id="dx17-622008"></a>
<!--l. 524--><p class="noindent" >NOTES:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">options</span></span></span> can be NULL if no options are desired.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">nRequest</span></span></span> can be NULL for a scalar.
     </li></ul>
<!--l. 534--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetLink</span></span></span> is implemented as a macro that calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetLinkValue</span></span></span> and can reference its arguments more than once. The
macro skips the call for constant links. User code should never call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetLinkValue</span></span></span>.
</p><!--l. 538--><p class="noindent" >This routine is called by database access itself and by record support and/or device support routines in order to get values for
input links. The value can be obtained directly from other records or via a channel access client. This routine honors the
link options (process and maximize severity). In addition it has code that optimizes the case of no options and
scalar.
</p><!--l. 543--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.2.3    </span> <a 
 id="x17-62300015.4.2.3"></a>dbGet</h5>
<!--l. 545--><p class="noindent" >Get values associated with a process variable, format:
</p>
<!--l. 547-->
     <div class="lstlisting" id="listing-234"><span class="label"><a 
 id="x17-623001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGet</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">returned</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">options</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">options</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623006r6"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-623007r7"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfl</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">used</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">monitor</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">routines</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-623008"></a>
<!--l. 558--><p class="noindent" >This routine retrieves the data referenced by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">paddr</span></span></span> and converts it to the format specified by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbrType</span></span></span>.
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">options</span></span></span> is a read/write field. On entry to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">options</span></span></span> holds the desired options. When <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span> returns,
     <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">options</span></span></span> gives the options actually honored. If an option is not honored, the corresponding fields in the buffer
     are filled with zeros.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">nRequest</span></span></span> is also a read/write field. Upon entry to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span> it specifies the maximum number of data elements
     the caller is willing to receive. When <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span> returns it has been set to the actual number of elements returned.
     It is permissible to request zero elements. This is useful when only option data is desired.
                                                                                         
                                                                                         
     </li>
     <li class="itemize">The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pfl</span></span></span> argument is for use by the Channel Access monitor routines. All other users must pass in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">NULL</span></span></span>.
     </li></ul>
<!--l. 579--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span> calls one of a number of conversion routines in order to convert data from the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBF</span></span></span> types to the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR</span></span></span> types. It calls
record support routines for special cases such as arrays. For example, if the number of field elements is greater then 1 and
record support routine <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">get_array_info</span></span></span> exists, then it is called. It returns two values: the current number of valid field
elements and an offset. The number of valid elements may not match <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbAddr.no_elements</span></span></span>, which is really the maximum
number of elements allowed. The offset is for use by records which implement circular buffers, and provides the offset to the
current beginning of the array data.
</p><!--l. 587--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.3    </span> <a 
 id="x17-62400015.4.3"></a>Put Routines</h4>
<!--l. 589--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.3.1    </span> <a 
 id="x17-62500015.4.3.1"></a>dbPutField</h5>
<!--l. 591--><p class="noindent" >Change the value of a process variable, format:
</p>
<!--l. 593-->
     <div class="lstlisting" id="listing-235"><span class="label"><a 
 id="x17-625001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbPutField</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-625002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-625003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-625004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-625005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">write</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-625006"></a>
<!--l. 602--><p class="noindent" >This routine is responsible for accepting data in one of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_xxx</span></span></span> formats, converting it as necessary, and modifying the
database. Similar to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span>, this routine calls one of a number of conversion routines to do the actual conversion and
relies on record support routines to handle arrays and other special cases.
</p><!--l. 605--><p class="noindent" >It should be noted that routine <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPut</span></span></span> does most of the work. The actual algorithm for <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> is:
</p><!--l. 608--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x17-625008x1">If the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DISP</span></span></span> field is <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">TRUE</span></span></span> then, unless it is the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DISP</span></span></span> field itself which is being modified, the field is not written.
     </li>
     <li 
  class="enumerate" id="x17-625010x2">The record is locked.
     </li>
     <li 
  class="enumerate" id="x17-625012x3"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPut</span></span></span> is called.
     </li>
     <li 
  class="enumerate" id="x17-625014x4">If the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPut</span></span></span> is successful then:
     <!--l. 618--><p class="noindent" >If this is the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">PROC</span></span></span> field or if both of the following are <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">TRUE</span></span></span>: 1) the field is a process passive field, 2) the record
     is passive.
     </p><!--l. 622--><p class="noindent" >
                                                                                         
                                                                                         
         </p><ol  class="enumerate2" >
         <li 
  class="enumerate" id="x17-625016x1">If the record is already active, ask for the record to be reprocessed when it completes.
         </li>
         <li 
  class="enumerate" id="x17-625018x2">Call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanPassive</span></span></span> after setting <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putf</span></span></span><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">TRUE</span></span></span> to show the process request came from <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span>.
         </li></ol>
     </li>
     <li 
  class="enumerate" id="x17-625020x5">The record is unlocked.
     </li></ol>
<!--l. 634--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.3.2    </span> <a 
 id="x17-62600015.4.3.2"></a>dbPutLink and dbPutLinkValue</h5>
<!--l. 636--><p class="noindent" >Change the value referenced by a database link, format:
</p>
<!--l. 638-->
     <div class="lstlisting" id="listing-236"><span class="label"><a 
 id="x17-626001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbPutLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-626002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">db_link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">link</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">field</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-626003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-626004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">ptr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">write</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-626005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">write</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-626006"></a>
<!--l. 647--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutLink</span></span></span> is actually a macro that calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutLinkValue</span></span></span> and can reference its arguments more than once. The macro
skips the call for constant links. User code should never call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutLinkValue</span></span></span>.
</p><!--l. 651--><p class="noindent" >This routine is called by database access itself and by record support and/or device support routines in order to put values into
other database records via output links.
</p><!--l. 653--><p class="noindent" >For Channel Access links it calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaPutLink</span></span></span>.
</p><!--l. 655--><p class="noindent" >For database links it performs the following functions:
</p><!--l. 657--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x17-626008x1">Calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPut</span></span></span>.
     </li>
     <li 
  class="enumerate" id="x17-626010x2">Implements maximize severity.
     </li>
     <li 
  class="enumerate" id="x17-626012x3">If the field being referenced is <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">PROC</span></span></span> or if both of the following are true: 1) <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">process_passive</span></span></span> is <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">TRUE</span></span></span> and
     2) the record is passive then:
     <!--l. 665--><p class="noindent" >
         </p><ol  class="enumerate2" >
         <li 
  class="enumerate" id="x17-626014x1">If the record is already active because of a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> request then ask for the record to be reprocessed
         when it completes.
         </li>
         <li 
  class="enumerate" id="x17-626016x2">otherwise call <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanPassive</span></span></span>.
         </li></ol>
                                                                                         
                                                                                         
     </li></ol>
<!--l. 674--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.3.3    </span> <a 
 id="x17-62700015.4.3.3"></a>dbPut</h5>
<!--l. 676--><p class="noindent" >Put a value to a database field, format:
</p>
<!--l. 678-->
     <div class="lstlisting" id="listing-237"><span class="label"><a 
 id="x17-627001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbPut</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-627002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-627003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">shortdbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-627004r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">addr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">data</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-627005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">longnRequest</span><span 
class="pcrr7t-">);</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">to</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">write</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-627006"></a>
<!--l. 687--><p class="noindent" >This routine is responsible for accepting data in one of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_xxx</span></span></span> formats, converting it as necessary, and modifying the
database. Similar to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span>, this routine calls one of a number of conversion routines to do the actual conversion and relies on
record support routines to handle arrays and other special cases.
</p><!--l. 692--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.4    </span> <a 
 id="x17-62800015.4.4"></a>Process Notify Subsystem</h4>
<!--l. 694--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.4.1    </span> <a 
 id="x17-62900015.4.4.1"></a>Introduction</h5>
<!--l. 696--><p class="noindent" >The Process Notify subsystem provides the following features:
</p><!--l. 698--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x17-629002x1">Processes a record with notification of completion.
     </li>
     <li 
  class="enumerate" id="x17-629004x2">Put after the record is claimed but before before the process.
     </li>
     <li 
  class="enumerate" id="x17-629006x3">Get after the process but before the record is released.
     </li>
     <li 
  class="enumerate" id="x17-629008x4">put, then process, then get.
     </li></ol>
<!--l. 710--><p class="noindent" >A process request will be issued if any of the following is true:
</p>
                                                                                         
                                                                                         
     <ul class="itemize1">
     <li class="itemize">The requester has issued a processs request and record is passive.
     </li>
     <li class="itemize">The requester is doing a put, the record is passive, and either the field description is process passive or the field
     is PROC.
     </li>
     <li class="itemize">The requester has requested a processGet or a putProcessGet request and the record is passive.
     </li></ul>
<!--l. 722--><p class="noindent" >At most one process is performed per <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span> request.
<a 
 id="dx17-629009"></a>
</p><!--l. 725--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.4.2    </span> <a 
 id="x17-63000015.4.4.2"></a>dbNotify.h</h5>
<!--l. 727--><p class="noindent" >The dbNotify.h header defines the following:
<a 
 id="dx17-630001"></a>
<a 
 id="dx17-630002"></a>
<a 
 id="dx17-630003"></a>
</p>
<!--l. 732-->
     <div class="lstlisting" id="listing-238"><span class="label"><a 
 id="x17-630004r1"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">enum</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630005r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630006r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">putProcessRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630007r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processGetRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630008r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">putProcessGetRequest</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630009r6"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyRequestType</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630010r7"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630011r8"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">enum</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630012r9"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">putDisabledType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630013r10"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">putFieldType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630014r11"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">putType</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630015r12"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyPutType</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630016r13"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630017r14"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">enum</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630018r15"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">getFieldType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630019r16"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">getType</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630020r17"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyGetType</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630021r18"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630022r19"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">enum</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630023r20"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyOK</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630024r21"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyCanceled</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630025r22"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyError</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630026r23"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyPutDisabled</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630027r24"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyStatus</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630028r25"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630029r26"></a></span><span 
class="pcrb7t-">typedef</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630030r27"></a></span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">Fields</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">for</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">private</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">use</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">dbNotify</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">implementation</span><span 
class="pcrro7t-">:</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630031r28"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">ellCheckNode</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">restartNode</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630032r29"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">pnotifyPvt</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630033r30"></a></span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">Fields</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">set</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">dbNotify</span><span 
class="pcrro7t-">:</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630034r31"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyStatus</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630035r32"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">wasProcessed</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">(0,1)</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">=&#x003E;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">(</span><span 
class="pcrro7t-">no</span><span 
class="pcrro7t-">,</span><span 
class="pcrro7t-">yes</span><span 
class="pcrro7t-">)</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630036r33"></a></span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">Fields</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">set</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">user</span><span 
class="pcrro7t-">:</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630037r34"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">notifyRequestType</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">requestType</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630038r35"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbAddr</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">set</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">by</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">dbNameToAddr</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630039r36"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(&#x22C6;</span><span 
class="pcrr7t-">putCallback</span><span 
class="pcrr7t-">)(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;,</span><span 
class="pcrr7t-">notifyPutType</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">type</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630040r37"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(&#x22C6;</span><span 
class="pcrr7t-">getCallback</span><span 
class="pcrr7t-">)(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;,</span><span 
class="pcrr7t-">notifyGetType</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">type</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630041r38"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(&#x22C6;</span><span 
class="pcrr7t-">doneCallback</span><span 
class="pcrr7t-">)(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630042r39"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">usrPvt</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">for</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">private</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">use</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">user</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630043r40"></a></span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630044r41"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630045r42"></a></span><span 
class="pcrr7t-">epicsShareFunc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbProcessNotify</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pprocessNotify</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-630046r43"></a></span><span 
class="pcrr7t-">epicsShareFunc</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbNotifyCancel</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">processNotify</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pprocessNotify</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 778--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.4.3    </span> <a 
 id="x17-63100015.4.4.3"></a>Client Semantics</h5>
<!--l. 780--><p class="noindent" >The client must allocate an instance of <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">processNotify</span></span></span>, which can be used for an arbitrary number of calls to
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span>. Before calling <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span> the following fields must be given values:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">requestType</span></span></span> - The request type.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">paddr</span></span></span> - A struct dbAddr, which is given values by a call to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbNameToAddr</span></span></span>.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putCallback</span></span></span> - If the request is a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putProcessRequest</span></span></span> or a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putProcessGetRequest</span></span></span> this must be
     given a value. It is called before the record is processed. This routine is expected to issue a database put. The
     return value should be (0, 1) if the callback operation (was not, was) successful.
                                                                                         
                                                                                         
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">getCallback</span></span></span> - If the request is a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">processGetRequest</span></span></span> or a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putProcessGetrequest</span></span></span> this must be
     given a value. It is called after the record is processed but before the record is released. This routine is expected
     to issue a database get.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">doneCallback</span></span></span> - This must be given a value. It is called after the record is processed and after the optional
     <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">getCallback</span></span></span>. This routine may issue a new <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span> if desired.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">userPvt</span></span></span> - A field for the client and its callback routines to use as needed; this pointer is not used by the
     processNotify code.</li></ul>
<!--l. 805--><p class="noindent" >The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyPutType</span></span></span> argument to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putCallback</span></span></span> is one of these values:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putDisabledType</span></span></span> - Puts are disabled. The client must not issue a put.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutFieldType</span></span></span> - The client may issue a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> request. This is returned when <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">paddr</span></span></span> refers to a
     link field. For link fields the record will never be processed as a result of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span>.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutType</span></span></span> - The client can issue a dbPut request. The record may or may not be processed after the client
     callback returns.</li></ul>
<!--l. 820--><p class="noindent" >The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyGetType</span></span></span> argument to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">getCallback</span></span></span> will be one of these values:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">getFieldType</span></span></span> - The client may issue a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> request. This is returned when <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">paddr</span></span></span> refers to a link
     field. For link fields the record will never be processed as a result of the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span>.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">getType</span></span></span> - The client may issue a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGet</span></span></span> request.
     </li></ul>
<!--l. 832--><p class="noindent" >The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyStatus</span></span></span> argument to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">doneCallback</span></span></span> is one of these values:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyOK</span></span></span> - The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span> request was successful and the record was processed.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyNoProcessOK</span></span></span> - The <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcessNotify</span></span></span> request was successful but the record was not processed.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">notifyError</span></span></span> - An error occured.
     </li></ul>
<!--l. 844--><p class="noindent" >Example code can be found in the routine <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbtpn</span></span></span> which is defined in <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">base/src/ioc/db/dbNotify.c</span></span></span>. It uses both
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">putProcesssRequest</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">processGetRequest</span></span></span>.
                                                                                         
                                                                                         
</p><!--l. 846--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.4.4    </span> <a 
 id="x17-63200015.4.4.4"></a>Callback Device Support</h5>
<!--l. 848--><p class="noindent" >EPICS base provides soft device support that uses processNotify for both input and output record types. All use the device type
name &#8220;Asyn Soft Channel&#8221;.
</p><!--l. 850--><p class="noindent" >The input types issue a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">processGetRequest</span></span></span>:
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devAiSoftCallback</span></span></span> - Supports aiRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devBiSoftCallback</span></span></span> - Supports biRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devMbbiSoftCallback</span></span></span> - Supports mbbiRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devMbbiDirectSoftCallback</span></span></span> - Supports mbbiDirectRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devLiSoftCallback</span></span></span> - Supports longinRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devSiSoftCallback</span></span></span> - Supports stringinRecord.
     </li></ul>
<!--l. 868--><p class="noindent" >The output types issue a channel access <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_put_callback</span></span></span> request.
</p>
     <ul class="itemize1">
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devAoSoftCallback</span></span></span> - Supports aoRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devBoSoftCallback</span></span></span> - Supports boRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devCalcoutSoftCallback</span></span></span> - Supports calcoutRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devMbboSoftCallback</span></span></span> - Supports mbboRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devMbboDirectSoftCallback</span></span></span> - Supports mbboDirectRecord.
     </li>
     <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">devSiSoftCallback</span></span></span> - Supports longoutRecord.
     </li></ul>
<!--l. 887--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.5    </span> <a 
 id="x17-63300015.4.5"></a>Utility Routines</h4>
                                                                                         
                                                                                         
<!--l. 889--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.1    </span> <a 
 id="x17-63400015.4.5.1"></a>dbBufferSize</h5>
<a 
 id="dx17-634001"></a>
<!--l. 892--><p class="noindent" >Determine the buffer size for a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> request, format:
</p>
<!--l. 894-->
     <div class="lstlisting" id="listing-239"><span class="label"><a 
 id="x17-634002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbBufferSize</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-634003r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">shortdbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-634004r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">longoptions</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">options</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">mask</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-634005r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">longnRequest</span><span 
class="pcrr7t-">);</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">number</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">elements</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-634006"></a>
<!--l. 902--><p class="noindent" >This routine returns the number of bytes that will be returned to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetField</span></span></span> if the request type, options,
and number of elements are specified as given to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbBufferSize</span></span></span>. Thus it can be used to allocate storage for
buffers.
</p><!--l. 905--><p class="noindent" >NOTE: This should become a Channel Access routine
</p><!--l. 907--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.2    </span> <a 
 id="x17-63500015.4.5.2"></a>dbValueSize</h5>
<a 
 id="dx17-635001"></a>
<!--l. 910--><p class="noindent" >Determine the size a value field, format:
</p>
<!--l. 912-->
     <div class="lstlisting" id="listing-240"><span class="label"><a 
 id="x17-635002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbValueSize</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">DBR_xxx</span><span 
class="pcrro7t-">&#x22C6;/</span>
     
</div>
<a 
 id="dx17-635003"></a>
<!--l. 917--><p class="noindent" >This routine returns the number of bytes for each element of type <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbrType</span></span></span>.
</p><!--l. 919--><p class="noindent" >NOTE: This should become a Channel Access routine
</p><!--l. 921--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.3    </span> <a 
 id="x17-63600015.4.5.3"></a>dbGetRset</h5>
<a 
 id="dx17-636001"></a>
<!--l. 924--><p class="noindent" >Get address of a record support entry table.
</p><!--l. 926--><p class="noindent" >Format:
</p>
                                                                                         
                                                                                         
<!--l. 928-->
     <div class="lstlisting" id="listing-241"><span class="label"><a 
 id="x17-636002r1"></a></span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">rset</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">dbGetRset</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">DBADDR</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-636003"></a>
<!--l. 933--><p class="noindent" >This routine returns the address of the record support entry table for the record referenced by the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBADDR</span></span></span>.
</p><!--l. 935--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.4    </span> <a 
 id="x17-63700015.4.5.4"></a>dbIsValueField</h5>
<a 
 id="dx17-637001"></a>
<!--l. 938--><p class="noindent" >Is this field the VAL field of the record?
</p><!--l. 940--><p class="noindent" >Format:
</p>
<!--l. 942-->
     <div class="lstlisting" id="listing-242"><span class="label"><a 
 id="x17-637002r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbIsValueField</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbFldDes</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pdbFldDes</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-637003"></a>
<!--l. 947--><p class="noindent" >This is the routine that makes the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">get_value</span></span></span> record support routine obsolete.
</p><!--l. 949--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.5    </span> <a 
 id="x17-63800015.4.5.5"></a>dbGetFieldIndex</h5>
<a 
 id="dx17-638001"></a>
<!--l. 952--><p class="noindent" >Get field index.
</p><!--l. 954--><p class="noindent" >Format:
</p>
<!--l. 956-->
     <div class="lstlisting" id="listing-243"><span class="label"><a 
 id="x17-638002r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetFieldIndex</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">DBADDR</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">paddr</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-638003"></a>
<!--l. 961--><p class="noindent" >Record support routines such as <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">special</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">cvt_dbaddr</span></span></span> need to know which field the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBADDR</span></span></span> references. The include
file describing the record contains define statements for each field. <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetFieldIndex</span></span></span> returns the index that can be matched
against the define statements (normally via a switch statement).
                                                                                         
                                                                                         
</p><!--l. 965--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.6    </span> <a 
 id="x17-63900015.4.5.6"></a>dbGetNelements</h5>
<a 
 id="dx17-639001"></a>
<!--l. 968--><p class="noindent" >Get number of elements in a field.
</p><!--l. 970--><p class="noindent" >Format:
</p>
<!--l. 972-->
     <div class="lstlisting" id="listing-244"><span class="label"><a 
 id="x17-639002r1"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetNelements</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nelements</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-639003"></a>
<!--l. 977--><p class="noindent" >This sets *<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">nelements</span></span></span> to the number of elements in the field referenced by plink.
</p><!--l. 979--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.7    </span> <a 
 id="x17-64000015.4.5.7"></a>dbIsLinkConnected</h5>
<a 
 id="dx17-640001"></a>
<!--l. 982--><p class="noindent" >Is the link connected.
</p><!--l. 984--><p class="noindent" >Format:
</p>
<!--l. 986-->
     <div class="lstlisting" id="listing-245"><span class="label"><a 
 id="x17-640002r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbIsLinkConnected</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-640003"></a>
<!--l. 991--><p class="noindent" >This routine returns (TRUE, FALSE) if the link (is, is not) connected.
</p><!--l. 993--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.8    </span> <a 
 id="x17-64100015.4.5.8"></a>dbGetPdbAddrFromLink</h5>
<a 
 id="dx17-641001"></a>
<!--l. 996--><p class="noindent" >This macro was provided in earlier versions of Base, but has been removed from 3.15 onward. Code that was using it to gain
access to the internal components of the the link&#8217;s dbAddr structure should be converted to make use of the other routines
described in this chapter instead.
                                                                                         
                                                                                         
</p><!--l. 999--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.9    </span> <a 
 id="x17-64200015.4.5.9"></a>dbGetLinkDBFtype</h5>
<a 
 id="dx17-642001"></a>
<!--l. 1002--><p class="noindent" >Get field type of a link.
</p><!--l. 1004--><p class="noindent" >Format:
</p>
<!--l. 1006-->
     <div class="lstlisting" id="listing-246"><span class="label"><a 
 id="x17-642002r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetLinkDBFtype</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-642003"></a>
<!--l. 1011--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.10    </span> <a 
 id="x17-64300015.4.5.10"></a>dbGetControlLimits</h5>
<a 
 id="dx17-643001"></a>
<!--l. 1014--><p class="noindent" >Get Control Limits for link.
</p><!--l. 1016--><p class="noindent" >Format:
</p>
<!--l. 1018-->
     <div class="lstlisting" id="listing-247"><span class="label"><a 
 id="x17-643002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetControlLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1022--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.11    </span> <a 
 id="x17-64400015.4.5.11"></a>dbGetGraphicLimits</h5>
<a 
 id="dx17-644001"></a>
<!--l. 1025--><p class="noindent" >Get Graphic Limits for link.
</p><!--l. 1027--><p class="noindent" >Format:
</p>
<!--l. 1029-->
     <div class="lstlisting" id="listing-248"><span class="label"><a 
 id="x17-644002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetGraphicLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">);</span>
     
</div>
                                                                                         
                                                                                         
<!--l. 1033--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.12    </span> <a 
 id="x17-64500015.4.5.12"></a>dbGetAlarmLimits</h5>
<a 
 id="dx17-645001"></a>
<!--l. 1036--><p class="noindent" >Get Alarm Limits for link.
</p><!--l. 1038--><p class="noindent" >Format:
</p>
<!--l. 1040-->
     <div class="lstlisting" id="listing-249"><span class="label"><a 
 id="x17-645002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetAlarmLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-645003r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">lolo</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">hihi</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1045--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.13    </span> <a 
 id="x17-64600015.4.5.13"></a>dbGetPrecision</h5>
<a 
 id="dx17-646001"></a>
<!--l. 1048--><p class="noindent" >Get Precision for link.
</p><!--l. 1050--><p class="noindent" >Format:
</p>
<!--l. 1052-->
     <div class="lstlisting" id="listing-250"><span class="label"><a 
 id="x17-646002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetPrecision</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precision</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1056--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.14    </span> <a 
 id="x17-64700015.4.5.14"></a>dbGetUnits</h5>
<a 
 id="dx17-647001"></a>
<!--l. 1059--><p class="noindent" >Get Units for link.
</p><!--l. 1061--><p class="noindent" >Format:
</p>
<!--l. 1063-->
     <div class="lstlisting" id="listing-251"><span class="label"><a 
 id="x17-647002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetUnits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">units</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">unitsSize</span><span 
class="pcrr7t-">);</span>
     
</div>
                                                                                         
                                                                                         
<!--l. 1067--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.15    </span> <a 
 id="x17-64800015.4.5.15"></a>dbGetSevr</h5>
<a 
 id="dx17-648001"></a>
<!--l. 1070--><p class="noindent" >Get Severity for link.
</p><!--l. 1072--><p class="noindent" >Format:
</p>
<!--l. 1074-->
     <div class="lstlisting" id="listing-252"><span class="label"><a 
 id="x17-648002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetSevr</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">sevr</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1078--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.5.16    </span> <a 
 id="x17-64900015.4.5.16"></a>dbGetTimeStamp</h5>
<a 
 id="dx17-649001"></a>
<!--l. 1081--><p class="noindent" >Get Time Stamp for record containing link.
</p><!--l. 1083--><p class="noindent" >Format:
</p>
<!--l. 1085-->
     <div class="lstlisting" id="listing-253"><span class="label"><a 
 id="x17-649002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbGetTimeStamp</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">epicsTimeStamp</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pstamp</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1089--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.6    </span> <a 
 id="x17-65000015.4.6"></a>Attribute Routine</h4>
<!--l. 1091--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.6.1    </span> <a 
 id="x17-65100015.4.6.1"></a>dbPutAttribute</h5>
<a 
 id="dx17-651001"></a>
<!--l. 1094--><p class="noindent" >Give a value to a record attribute.
</p>
<!--l. 1096-->
     <div class="lstlisting" id="listing-254"><span class="label"><a 
 id="x17-651002r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbPutAttribute</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">recordTypename</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-651003r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">name</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">value</span><span 
class="pcrr7t-">);</span>
     
                                                                                         
                                                                                         
</div>
<a 
 id="dx17-651004"></a>
<!--l. 1102--><p class="noindent" >This sets the record attribute <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">name</span></span></span> for record type <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">recordTypename</span></span></span> to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">value</span></span></span>. For example the following would set the
version for the ai record.
</p>
<!--l. 1105-->
     <div class="lstlisting" id="listing-255"><span class="label"><a 
 id="x17-651005r1"></a></span><span 
class="pcrr7t-">dbPutAttribute</span><span 
class="pcrr7t-">(</span><span 
class="pcrro7t-">"</span><span 
class="pcrro7t-">ai</span><span 
class="pcrro7t-">"</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">"</span><span 
class="pcrro7t-">VERS</span><span 
class="pcrro7t-">"</span><span 
class="pcrr7t-">,</span><span 
class="pcrro7t-">"</span><span 
class="pcrro7t-">V800</span><span 
class="pcrro7t-">.6.95</span><span 
class="pcrro7t-">"</span><span 
class="pcrr7t-">);</span>
     
</div>
<!--l. 1109--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.4.7    </span> <a 
 id="x17-65200015.4.7"></a>Process Routines</h4>
<!--l. 1111--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.7.1    </span> <a 
 id="x17-65300015.4.7.1"></a>dbScanPassive</h5>
<!--l. 1113--><p class="noindent" >dbScanLink
</p><!--l. 1115--><p class="noindent" >dbScanFwdLink
</p><!--l. 1117--><p class="noindent" >Process record if it is passive, format:
</p>
<!--l. 1119-->
     <div class="lstlisting" id="listing-256"><span class="label"><a 
 id="x17-653001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbScanPassive</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-653002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfrom</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-653003r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pto</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">/&#x22C6;</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">addr</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">of</span><span 
class="pcrro7t-">&#x00A0;</span><span 
class="pcrro7t-">record</span><span 
class="pcrro7t-">&#x22C6;/</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-653004r4"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbScanLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-653005r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfrom</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pto</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-653006r6"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbScanFwdLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-653007"></a>
<a 
 id="dx17-653008"></a>
<a 
 id="dx17-653009"></a>
<!--l. 1131--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanPassive</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanLink</span></span></span> are given the record requesting the scan, which may be <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">NULL</span></span></span>, and the record to be
processed. If the record is passive and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pact</span></span></span> is <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">FALSE</span></span></span> then <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbProcess</span></span></span> is called. Note that these routine are called by
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbGetLink</span></span></span>, <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span>, and by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">recGblFwdLink</span></span></span>.
</p><!--l. 1135--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanFwdLink</span></span></span> is given a link that must be a forward link field. It follows the rules for scanning a forward link. That is for
DB_LINKs it calls dbScanPassive and for CA_LINKS it does a dbCaPutLink if the PROC field of record is being
addressed.
</p><!--l. 1139--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.4.7.2    </span> <a 
 id="x17-65400015.4.7.2"></a>dbProcess </h5>
                                                                                         
                                                                                         
<!--l. 1141--><p class="noindent" >Request that a database record be processed, format:
</p>
<!--l. 1143-->
     <div class="lstlisting" id="listing-257"><span class="label"><a 
 id="x17-654001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbProcess</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommom</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-654002"></a>
<!--l. 1148--><p class="noindent" >Request that record be processed. Record processing is described in detail below.
</p><!--l. 1151--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.5    </span> <a 
 id="x17-65500015.5"></a>Runtime Link Modification</h3>
<!--l. 1153--><p class="noindent" >Database links can be changed at run time but only via a channel access client, i.e. via calls to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> but not to
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutLink</span></span></span>. The following restrictions apply:
</p>
     <ul class="itemize1">
     <li class="itemize">The date type may be <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DBR_STRING</span></span></span> or a nil-terminated array of DBR_CHAR or DBR_UCHAR characters
     </li>
     <li class="itemize">If a link is being changed to a different hardware link type then the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">DTYP</span></span></span> field must be set before the link field.
     </li>
     <li class="itemize">The syntax for the string is exactly the same as described for link fields in chapter &#8220;Database Definition&#8221;
     </li></ul>
<!--l. 1165--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.6    </span> <a 
 id="x17-65600015.6"></a>Channel Access Monitors</h3>
<a 
 id="dx17-656001"></a>
<!--l. 1168--><p class="noindent" >There are facilities within the Channel Access communication infrastructure which allow the value of a process variable to be
monitored by a channel access client. It is a responsibility of record support (and db common) to notify the
channel access server when the internal state of a process variable has been modified. State changes can include
changes in the value of a process variable and also changes in the alarm state of a process variable. The routine
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> is called to inform the channel access server that a process variable state change event has
occurred.
</p>
<!--l. 1173-->
     <div class="lstlisting" id="listing-258"><span class="label"><a 
 id="x17-656002r1"></a></span><span 
class="pcrb7t-">#</span><span 
class="pcrb7t-">include</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x003C;</span><span 
class="pcrr7t-">caeventmask</span><span 
class="pcrr7t-">.</span><span 
class="pcrr7t-">h</span><span 
class="pcrr7t-">&#x003E;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-656003r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-656004r3"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">db_post_events</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfield</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-656005r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">unsigned</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">caEventMask</span><span 
class="pcrr7t-">);</span>
     
                                                                                         
                                                                                         
</div>
<a 
 id="dx17-656006"></a>
<!--l. 1181--><p class="noindent" >The first argument, &#8220;precord&#8221;, should be passed a pointer to the record which is posting the event(s). The second argument,
&#8220;pfield&#8221;, should be passed a pointer to the field in the record that contains the process variable that has been modified. The third
argument, &#8220;select&#8221;, should be passed an event select mask. This mask can be any logical or combination of
<span 
class="cmsy-10">{</span>DBE_VALUE, DBE_LOG, DBE_ALARM<span 
class="cmsy-10">}</span>. A description of the purpose of each flag in the event select mask
follows.
</p>
     <ul class="itemize1">
     <li class="itemize">DBE_VALUE This indicates that a significant change in the process variable&#8217;s value has occurred. A significant
     change is often determined by the magnitude of the monitor &#8220;dead band&#8221; field in the record.
     </li>
     <li class="itemize">DBE_LOG  This  indicates  that  a  change  in  the  process  variable&#8217;s  value  significant  to  archival  clients  has
     occurred. A significant change to archival clients is often determined by the magnitude of the archive &#8220;dead
     band&#8221; field in the record.
     </li>
     <li class="itemize">DBE_ALARM This indicates that a change in the process variable&#8217;s alarm state has occurred.
     </li></ul>
<!--l. 1198--><p class="noindent" >The function <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> returns 0 if it is successful and -1 if it fails. It appears to be common practice within EPICS
record support to ignore the status from <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span>. At this time <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> always returns 0
(success). Because so many records at this time depend on this behavior it is unlikely that it will be changed in the
future.
</p><!--l. 1203--><p class="noindent" >The function <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> is written so that record support will never be blocked attempting to post an event because a
slow client is not able to process events fast enough. Each call to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> causes the current value, alarm status,
and time stamp for the field to be copied into a ring buffer. The thread calling <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">db_post_events</span></span></span> will not be
delayed by any network or memory allocation overhead. A lower priority thread in the server is responsible
for transferring the events in the event queue to the channel access clients that may be monitoring the process
variable.
</p><!--l. 1208--><p class="noindent" >Currently, when an event is posted for a DBF_STRING field or a field containing array data the value is NOT saved in the ring
buffer and the client will receive whatever value happens to be in the field when the lower priority thread transfers the event to
the client. This behavior may be improved in the future.
</p><!--l. 1212--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.7    </span> <a 
 id="x17-65700015.7"></a>Lock Set Routines</h3>
<!--l. 1214--><p class="noindent" >User code only calls <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanLock</span></span></span> and <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbScanUnlock</span></span></span>. All other routines are called by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">iocCore</span></span></span>.
</p><!--l. 1217--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.1    </span> <a 
 id="x17-65800015.7.1"></a>dbScanLock</h4>
<!--l. 1219--><p class="noindent" >Lock a lock set:
                                                                                         
                                                                                         
</p>
<!--l. 1221-->
     <div class="lstlisting" id="listing-259"><span class="label"><a 
 id="x17-658001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbScanLock</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-658002"></a>
<!--l. 1226--><p class="noindent" >Lock the lock set to which the specified record belongs.
</p><!--l. 1228--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.2    </span> <a 
 id="x17-65900015.7.2"></a>dbScanUnlock</h4>
<!--l. 1230--><p class="noindent" >Unlock a lock set:
</p>
<!--l. 1232-->
     <div class="lstlisting" id="listing-260"><span class="label"><a 
 id="x17-659001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbScanUnlock</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-659002"></a>
<!--l. 1237--><p class="noindent" >Lock the lock set to which the specified record belongs
</p><!--l. 1239--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.3    </span> <a 
 id="x17-66000015.7.3"></a>dbLockGetLockId</h4>
<!--l. 1241--><p class="noindent" >Get lock set id:
</p>
<!--l. 1243-->
     <div class="lstlisting" id="listing-261"><span class="label"><a 
 id="x17-660001r1"></a></span><span 
class="pcrb7t-">unsigned</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockGetLockId</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-660002"></a>
<!--l. 1248--><p class="noindent" >Each lock set is assigned a unique ID. This routine retrieves it. This is most useful to determine if two records are in the same
lock set.
                                                                                         
                                                                                         
</p><!--l. 1252--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.4    </span> <a 
 id="x17-66100015.7.4"></a>dbLockInitRecords</h4>
<!--l. 1254--><p class="noindent" >Determine lock sets for each record in database.
</p>
<!--l. 1256-->
     <div class="lstlisting" id="listing-262"><span class="label"><a 
 id="x17-661001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockInitRecords</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">dbBase</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pdbbase</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-661002"></a>
<!--l. 1261--><p class="noindent" >Called by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">iocInit</span></span></span>.
</p><!--l. 1263--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.5    </span> <a 
 id="x17-66200015.7.5"></a>dbLockSetMerge</h4>
<!--l. 1265--><p class="noindent" >Merge records into same lock set.
</p>
<!--l. 1267-->
     <div class="lstlisting" id="listing-263"><span class="label"><a 
 id="x17-662001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockSetMerge</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pfirst</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-662002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">psecond</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-662003"></a>
<!--l. 1273--><p class="noindent" >If specified records are not in same lock set the lock sets are merged. Called by dbLockInitRecords and also when links are
modified by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span>.
</p><!--l. 1276--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.6    </span> <a 
 id="x17-66300015.7.6"></a>dbLockSetSplit</h4>
<!--l. 1278--><p class="noindent" >Recompute lock sets for given lock set
</p>
<!--l. 1280-->
     <div class="lstlisting" id="listing-264"><span class="label"><a 
 id="x17-663001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockSetSplit</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">psource</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-663002"></a>
<!--l. 1285--><p class="noindent" >This is called when <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbPutField</span></span></span> modifies links.
                                                                                         
                                                                                         
</p><!--l. 1287--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.7    </span> <a 
 id="x17-66400015.7.7"></a>dbLockSetGblLock</h4>
<!--l. 1289--><p class="noindent" >Global lock for modifying links.
</p>
<!--l. 1291-->
     <div class="lstlisting" id="listing-265"><span class="label"><a 
 id="x17-664001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockSetGblLock</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-664002"></a>
<!--l. 1296--><p class="noindent" >Only one task at a time can modify link fields. This routine provides a global lock to prevent conflicts.
</p><!--l. 1299--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.8    </span> <a 
 id="x17-66500015.7.8"></a>dbLockSetGblUnlock</h4>
<!--l. 1301--><p class="noindent" >Unlock the global lock.
</p>
<!--l. 1303-->
     <div class="lstlisting" id="listing-266"><span class="label"><a 
 id="x17-665001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockSetGblUnlock</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-665002"></a>
<!--l. 1308--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.7.9    </span> <a 
 id="x17-66600015.7.9"></a>dbLockSetRecordLock</h4>
<!--l. 1310--><p class="noindent" >If record is not already scan locked lock it.
</p>
<!--l. 1312-->
     <div class="lstlisting" id="listing-267"><span class="label"><a 
 id="x17-666001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbLockSetRecordLock</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCommon</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precord</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-666002"></a>
                                                                                         
                                                                                         
<!--l. 1317--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.8    </span> <a 
 id="x17-66700015.8"></a>Channel Access Database Links</h3>
<!--l. 1319--><p class="noindent" >The routines described here are used to create and manipulate Channel Access connections from database input or output links.
At IOC initialization an attempt is made to convert all process variable links to database links. For any link that fails, it is
assumed that the link is a Channel Access link, i.e. a link to a process variable defined in another IOC. The routines described
here are used to manage these links. User code never needs to call these routines. They are automatically called by iocInit and
database access.
</p><!--l. 1326--><p class="noindent" >At <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">iocInit</span></span></span> time a task <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaLink</span></span></span> is spawned. This task is a channel access client that issues channel access requests for all
channel access links in the database. For each link a channel access search request is issued. When the search
succeeds a channel access monitor is established. The monitor is issued specifying <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_field_type</span></span></span> and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_element_count</span></span></span>. A buffer is also allocated to hold monitor return data as well as severity. When <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaGetLink</span></span></span> is
called data is taken from the buffer, converted if necessary, and placed in the location specified by the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">pbuffer</span></span></span>
argument.
</p><!--l. 1335--><p class="noindent" >When the first <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaPutLink</span></span></span> is called for a link an output buffer is allocated, again using <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_field_type</span></span></span> and
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_element_count</span></span></span>. The data specified by the pbuffer argument is converted and stored in the buffer. A
request is then made to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaLink</span></span></span> task to issue a <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">ca_put</span></span></span>. Subsequent calls to <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCaPutLink</span></span></span> reuse the same
buffer.
</p><!--l. 1340--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.8.1    </span> <a 
 id="x17-66800015.8.1"></a>Basic Routines</h4>
<!--l. 1342--><p class="noindent" >Except for dbCaPutLinkCallback, these routines are normally only called by database access, i.e. they are not called by record
support modules.
</p><!--l. 1344--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.1    </span> <a 
 id="x17-66900015.8.1.1"></a>dbCaLinkInit</h5>
<!--l. 1346--><p class="noindent" >Called by <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">iocInit</span></span></span> to initialize the <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">dbCa</span></span></span> library
</p>
<!--l. 1348-->
     <div class="lstlisting" id="listing-268"><span class="label"><a 
 id="x17-669001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaLinkInit</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-669002"></a>
<!--l. 1353--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.2    </span> <a 
 id="x17-67000015.8.1.2"></a>dbCaAddLink</h5>
<!--l. 1355--><p class="noindent" >Add a new channel access link
                                                                                         
                                                                                         
</p>
<!--l. 1357-->
     <div class="lstlisting" id="listing-269"><span class="label"><a 
 id="x17-670001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaAddLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-670002"></a>
<!--l. 1362--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.3    </span> <a 
 id="x17-67100015.8.1.3"></a>dbCaAddLinkCallback</h5>
<!--l. 1364-->
     <div class="lstlisting" id="listing-270"><span class="label"><a 
 id="x17-671001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaAddLinkCallback</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-671002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaCallback</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">connect</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">dbCaCallback</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">monitor</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">userPvt</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-671003"></a>
<!--l. 1370--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">connect</span></span></span> will be called whenever the link connects or disconnects. <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">monitor</span></span></span> will be called whenever a monitor event occurs.
<span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">connect</span></span></span> and or <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">monitor</span></span></span> may be null.
</p><!--l. 1374--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.4    </span> <a 
 id="x17-67200015.8.1.4"></a>dbCaRemoveLink</h5>
<!--l. 1376--><p class="noindent" >Remove channel access link.
</p>
<!--l. 1378-->
     <div class="lstlisting" id="listing-271"><span class="label"><a 
 id="x17-672001r1"></a></span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaRemoveLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-672002"></a>
<!--l. 1383--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.5    </span> <a 
 id="x17-67300015.8.1.5"></a>dbCaGetLink</h5>
<!--l. 1385--><p class="noindent" >Get link value
</p>
<!--l. 1387-->
     <div class="lstlisting" id="listing-272"><span class="label"><a 
 id="x17-673001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-673002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">unsigned</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">psevr</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">);</span>
     
                                                                                         
                                                                                         
</div>
<a 
 id="dx17-673003"></a>
<!--l. 1393--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.6    </span> <a 
 id="x17-67400015.8.1.6"></a>dbCaPutLink</h5>
<!--l. 1395--><p class="noindent" >Put link value
</p>
<!--l. 1397-->
     <div class="lstlisting" id="listing-273"><span class="label"><a 
 id="x17-674001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaPutLink</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-674002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">buffering</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-674003"></a>
<!--l. 1403--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.1.7    </span> <a 
 id="x17-67500015.8.1.7"></a>dbCaPutLinkCallback</h5>
<!--l. 1405--><p class="noindent" >This is meant for use by device or record support that wants a put to complete before completing record processing.
</p>
<!--l. 1407-->
     <div class="lstlisting" id="listing-274"><span class="label"><a 
 id="x17-675001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaPutLinkCallback</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbrType</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675002r2"></a></span><span 
class="pcrb7t-">const</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pbuffer</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">nRequest</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">dbCaPutCallback</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">callback</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-675003"></a>
<a 
 id="dx17-675004"></a>
<!--l. 1414--><p class="noindent" ><span 
class="cmmi-10">&#x003C;</span>base<span 
class="cmmi-10">&#x003E;</span>/src/std/dev/devAoSoftCallback.c provides an example of how to use this function. It contains:
</p>
<!--l. 1417-->
     <div class="lstlisting" id="listing-275"><span class="label"><a 
 id="x17-675005r1"></a></span><span 
class="pcrb7t-">static</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">write_ao</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">aoRecord</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">)</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675006r2"></a></span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675007r3"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&amp;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">out</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675008r4"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675009r5"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675010r6"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">if</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">pact</span><span 
class="pcrr7t-">)</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675011r7"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">return</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">0;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675012r8"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">if</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">type</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">!=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">CA_LINK</span><span 
class="pcrr7t-">)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675013r9"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbPutLink</span><span 
class="pcrr7t-">(&amp;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">out</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBR_DOUBLE</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&amp;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">oval</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">1);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675014r10"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">return</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675015r11"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675016r12"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675017r13"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaPutLinkCallback</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">DBR_DOUBLE</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&amp;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">oval</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">1,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675018r14"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">dbCaCallback</span><span 
class="pcrr7t-">)</span><span 
class="pcrr7t-">dbCaCallbackProcess</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675019r15"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">if</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">)</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">{</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675020r16"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">recGblSetSevr</span><span 
class="pcrr7t-">(</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">LINK_ALARM</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">INVALID_ALARM</span><span 
class="pcrr7t-">);</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675021r17"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">return</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">status</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675022r18"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">}</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675023r19"></a></span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675024r20"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">prec</span><span 
class="pcrr7t-">-&#x003E;</span><span 
class="pcrr7t-">pact</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">=</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">TRUE</span><span 
class="pcrr7t-">;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675025r21"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">return</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">0;</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-675026r22"></a></span><span 
class="pcrr7t-">}</span>
     
</div>
<!--l. 1442--><p class="noindent" >What happens is the following:
     </p><dl class="description"><dt class="description">
 </dt><dd 
class="description">When the record is processed write_ao is called with pact=0.
         <dl class="description"><dt class="description">
      </dt><dd 
class="description">If the link is not a CA_LINK it just calls dbPutLink. It leaves pact 0. Thus record support completes.
                                                                                         
                                                                                         
         </dd><dt class="description">
      </dt><dd 
class="description">If it is a CA_LINK it calls dbCaPutLinkCallback and sets pact true. Thus record is asynchronous.
         </dd></dl>
     </dd><dt class="description">
 </dt><dd 
class="description">If the record is asynchrnous then sometime later dbCaCallbackProcess is called. It calls the process routine of record support,
     which calls write_ao with pact true. write_ao just returns success. Record support then completes the second phase of
     record processing.
     </dd></dl>
<!--l. 1466--><p class="noindent" >There is a possibility that the link is changed between the two phases of record processing. If this happens the user supplied
callback will still get called exactly once but the link may have been modified.
</p><!--l. 1469--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.8.2    </span> <a 
 id="x17-67600015.8.2"></a>Attributes of Link</h4>
<!--l. 1471--><p class="noindent" >The routines in this section are meant for use by device support to find out information about link fields. They must
be called with dbScanLock held, i.e. normally they are called by the read or write method provided by device
support.
</p><!--l. 1474--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.1    </span> <a 
 id="x17-67700015.8.2.1"></a>dbCaIsLinkConnected</h5>
<!--l. 1476--><p class="noindent" >Is Channel Connected
</p>
<!--l. 1478-->
     <div class="lstlisting" id="listing-276"><span class="label"><a 
 id="x17-677001r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaIsLinkConnected</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">)</span>
     
</div>
<a 
 id="dx17-677002"></a>
<!--l. 1483--><p class="noindent" >This routine returns (TRUE, FALSE) if the link (is, is not) connected.
</p><!--l. 1485--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.2    </span> <a 
 id="x17-67800015.8.2.2"></a>dbCaGetNelements</h5>
<!--l. 1487--><p class="noindent" >Get Number of Elements
</p>
<!--l. 1489-->
     <div class="lstlisting" id="listing-277"><span class="label"><a 
 id="x17-678001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetNelements</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">nelements</span><span 
class="pcrr7t-">);</span>
     
                                                                                         
                                                                                         
</div>
<a 
 id="dx17-678002"></a>
<!--l. 1494--><p class="noindent" >This call, which returns an error if the link is not connected, sets the native number of elements.
</p><!--l. 1496--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.3    </span> <a 
 id="x17-67900015.8.2.3"></a>dbCaGetSevr</h5>
<!--l. 1498--><p class="noindent" >Get Alarm Severity
</p>
<!--l. 1500-->
     <div class="lstlisting" id="listing-278"><span class="label"><a 
 id="x17-679001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetSevr</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">severity</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-679002"></a>
<!--l. 1505--><p class="noindent" >This call, which returns an error if the link is not connected, sets the alarm severity.
</p><!--l. 1507--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.4    </span> <a 
 id="x17-68000015.8.2.4"></a>dbCaGetTimeStamp</h5>
<!--l. 1509--><p class="noindent" >Get Time Stamp
</p>
<!--l. 1511-->
     <div class="lstlisting" id="listing-279"><span class="label"><a 
 id="x17-680001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetTimeStamp</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">TS_STAMP</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">pstamp</span><span 
class="pcrr7t-">));</span>
     
</div>
<a 
 id="dx17-680002"></a>
<!--l. 1516--><p class="noindent" >This call, which returns an error if the link is not connected, sets pstamp to the time obtained by the last CA
monitor.
</p><!--l. 1518--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.5    </span> <a 
 id="x17-68100015.8.2.5"></a>dbCaGetLinkDBFtype</h5>
<!--l. 1520--><p class="noindent" >Get link type
</p>
<!--l. 1522-->
     <div class="lstlisting" id="listing-280"><span class="label"><a 
 id="x17-681001r1"></a></span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetLinkDBFtype</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">);</span>
     
                                                                                         
                                                                                         
</div>
<a 
 id="dx17-681002"></a>
<!--l. 1527--><p class="noindent" >This call, which returns an error if the link is not connected, returns the field type.
</p><!--l. 1529--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.6    </span> <a 
 id="x17-68200015.8.2.6"></a>dbCaGetAttributes</h5>
<!--l. 1531--><p class="noindent" >Get Attributes
</p>
<!--l. 1533-->
     <div class="lstlisting" id="listing-281"><span class="label"><a 
 id="x17-682001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetAttributes</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-682002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">(&#x22C6;</span><span 
class="pcrr7t-">callback</span><span 
class="pcrr7t-">)(</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">usrPvt</span><span 
class="pcrr7t-">),</span><span 
class="pcrb7t-">void</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">usrPvt</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-682003"></a>
<!--l. 1539--><p class="noindent" >When ever dbCa receives a connection it issues a CA get request to obtain the control, graphic, and alarm limits
and to obtain the precision and units. By calling dbCaGetAttributes the caller can be notified when this get
completes.
</p><!--l. 1542--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.7    </span> <a 
 id="x17-68300015.8.2.7"></a>dbCaGetControlLimits</h5>
<!--l. 1544--><p class="noindent" >Get Control Limits
</p>
<!--l. 1546-->
     <div class="lstlisting" id="listing-282"><span class="label"><a 
 id="x17-683001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetControlLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-683002"></a>
<!--l. 1551--><p class="noindent" >This call returns an error if the link is not connected or if the CA get request for limits, etc. has not completed. If it returns
success it has set the control limits.
</p><!--l. 1554--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.8    </span> <a 
 id="x17-68400015.8.2.8"></a>dbCaGetGraphicLimits</h5>
<!--l. 1556--><p class="noindent" >Get graphic Limits
</p>
<!--l. 1558-->
                                                                                         
                                                                                         
     <div class="lstlisting" id="listing-283"><span class="label"><a 
 id="x17-684001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetGraphicLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-684002"></a>
<!--l. 1563--><p class="noindent" >This call returns an error if the link is not connected or if the CA get request for limits, etc. has not completed. If it returns
success it has set the graphic limits.
</p><!--l. 1566--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.9    </span> <a 
 id="x17-68500015.8.2.9"></a>dbCaGetAlarmLimits</h5>
<!--l. 1568--><p class="noindent" >Get Alarm Limits
</p>
<!--l. 1570-->
     <div class="lstlisting" id="listing-284"><span class="label"><a 
 id="x17-685001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetAlarmLimits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><br /><span class="label"><a 
 id="x17-685002r2"></a></span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">lolo</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">low</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">high</span><span 
class="pcrr7t-">,</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrb7t-">double</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">hihi</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-685003"></a>
<!--l. 1576--><p class="noindent" >This call returns an error if the link is not connected or if the CA get request for limits, etc. has not completed. If it returns
success it has set the alarm limits.
</p><!--l. 1579--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.10    </span> <a 
 id="x17-68600015.8.2.10"></a>dbCaGetPrecision</h5>
<!--l. 1581--><p class="noindent" >Get Precision
</p>
<!--l. 1583-->
     <div class="lstlisting" id="listing-285"><span class="label"><a 
 id="x17-686001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetPrecision</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">short</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">precision</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-686002"></a>
<!--l. 1588--><p class="noindent" >This call returns an error if the link is not connected or if the CA get request for limits, etc. has not completed. If it returns
success it has set the precision.
</p><!--l. 1591--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.8.2.11    </span> <a 
 id="x17-68700015.8.2.11"></a>dbCaGetUnits</h5>
<!--l. 1593--><p class="noindent" >Get Units
</p>
                                                                                         
                                                                                         
<!--l. 1595-->
     <div class="lstlisting" id="listing-286"><span class="label"><a 
 id="x17-687001r1"></a></span><span 
class="pcrb7t-">long</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">dbCaGetUnits</span><span 
class="pcrr7t-">(</span><span 
class="pcrb7t-">struct</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">link</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">plink</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">char</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">&#x22C6;</span><span 
class="pcrr7t-">units</span><span 
class="pcrr7t-">,</span><span 
class="pcrb7t-">int</span><span 
class="pcrr7t-">&#x00A0;</span><span 
class="pcrr7t-">unitsSize</span><span 
class="pcrr7t-">);</span>
     
</div>
<a 
 id="dx17-687002"></a>
<!--l. 1600--><p class="noindent" >This call returns an error if the link is not connected or if the CA get request for limits, etc. has not completed. If it returns
success it has set the units.
</p><!--l. 1603--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">15.9    </span> <a 
 id="x17-68800015.9"></a>dbServer API</h3>
<!--l. 1605--><p class="noindent" >Software that provides external access to the IOC database is a server layer. It is helpful for the IOC developer to be able to see
information about the servers that are making use of the database access routines for purposes of diagnosing problems and
reporting usage statistics. The dbServer API is provided to allow the IOC code to display specific kinds of information from
the servers connected to it, without having to integrate those servers into the IOC code. Server layers are thus
encouraged to register a dbServer structure with the IOC database to allow this information to be retrieved as
needed.
</p><!--l. 1610--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.9.1    </span> <a 
 id="x17-68900015.9.1"></a>Registering a server layer</h4>
<!--l. 1612--><p class="noindent" >The dbServer structure is defined in dbServer.h as follows:
                                                                                         
                                                                                         
</p>
<div class="verbatim" id="verbatim-213">
<div class="fancyvrb" id="fancyvrb213"><a 
 id="x17-689002r1"></a>&#x00A0;&#x00A0;typedef&#x00A0;struct&#x00A0;dbServer&#x00A0;{<br class="fancyvrb" /><a 
 id="x17-689004r2"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ELLNODE&#x00A0;node;<br class="fancyvrb" /><a 
 id="x17-689006r3"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char&#x00A0;&#x22C6;name;
<br class="fancyvrb" /><a 
 id="x17-689008r4"></a>&#x00A0;&#x00A0;<br class="fancyvrb" /><a 
 id="x17-689010r5"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/&#x22C6;&#x00A0;Print&#x00A0;level-dependent&#x00A0;status&#x00A0;report&#x00A0;to&#x00A0;stdout&#x00A0;&#x22C6;/
<br class="fancyvrb" /><a 
 id="x17-689012r6"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;void&#x00A0;(&#x22C6;&#x00A0;report)&#x00A0;(unsigned&#x00A0;level);<br class="fancyvrb" /><a 
 id="x17-689014r7"></a>&#x00A0;&#x00A0;<br class="fancyvrb" /><a 
 id="x17-689016r8"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/&#x22C6;&#x00A0;Get&#x00A0;number&#x00A0;of&#x00A0;channels&#x00A0;and&#x00A0;clients&#x00A0;connected&#x00A0;&#x22C6;/
<br class="fancyvrb" /><a 
 id="x17-689018r9"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;void&#x00A0;(&#x22C6;&#x00A0;stats)&#x00A0;(unsigned&#x00A0;&#x22C6;channels,&#x00A0;unsigned&#x00A0;&#x22C6;clients);<br class="fancyvrb" /><a 
 id="x17-689020r10"></a>&#x00A0;&#x00A0;
<br class="fancyvrb" /><a 
 id="x17-689022r11"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/&#x22C6;&#x00A0;Get&#x00A0;identity&#x00A0;of&#x00A0;client&#x00A0;initiating&#x00A0;the&#x00A0;calling&#x00A0;thread&#x00A0;&#x22C6;/
<br class="fancyvrb" /><a 
 id="x17-689024r12"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/&#x22C6;&#x00A0;Must&#x00A0;return&#x00A0;0&#x00A0;(OK),&#x00A0;or&#x00A0;-1&#x00A0;(ERROR)&#x00A0;from&#x00A0;unknown&#x00A0;threads&#x00A0;&#x22C6;/
<br class="fancyvrb" /><a 
 id="x17-689026r13"></a>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;(&#x22C6;&#x00A0;client)&#x00A0;(char&#x00A0;&#x22C6;pBuf,&#x00A0;size_t&#x00A0;bufSize);<br class="fancyvrb" /><a 
 id="x17-689028r14"></a>&#x00A0;&#x00A0;}&#x00A0;dbServer;</div></div>
<!--l. 1629--><p class="nopar" ><a 
 id="dx17-689029"></a>
</p><!--l. 1632--><p class="noindent" >A server layer should instantiate one of these and pass a pointer to it to dbRegisterServer:
                                                                                         
                                                                                         
</p>
<div class="verbatim" id="verbatim-214">
<div class="fancyvrb" id="fancyvrb214"><a 
 id="x17-689031r1"></a>&#x00A0;&#x00A0;void&#x00A0;dbRegisterServer(dbServer&#x00A0;&#x22C6;psrv);</div></div>
<!--l. 1636--><p class="nopar" ><a 
 id="dx17-689032"></a>
</p><!--l. 1639--><p class="noindent" >The individual function pointers in the structure are optional, use NULL if a specific routine has not been implemented
for this server. Additional function pointers may be added to the end of this structure in future releases, while
aiming to keep API-compatibility with older versions. The functions provided by the server layer are used as
follows.
</p>
     <ul class="itemize1">
     <li class="itemize"><a 
 id="dx17-689033"></a>report: This routine should print a status report to stdout. Increasing interest levels should provide additional
     information.
     </li>
     <li class="itemize"><a 
 id="dx17-689034"></a>stats: This routine returns the current count of the number of channels and clients connected through this service.
     </li>
     <li class="itemize"><a 
 id="dx17-689035"></a>client:  When  called  by  one  of  the  server&#8217;s  threads,  this  routine  should  fill  in  the  buffer  with  a  short  string
     identifying the specific client (e.g. <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">user@host</span></span></span>), and return 0. If the calling thread does not belong to this
     server it should just return -1.
     </li></ul>
<!--l. 1653--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">15.9.2    </span> <a 
 id="x17-69000015.9.2"></a>Interacting with Server layers</h4>
<!--l. 1655--><p class="noindent" >The dbServer.h header makes the following routines available to the IOC code.
</p><!--l. 1657--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.9.2.1    </span> <a 
 id="x17-69100015.9.2.1"></a>dbsr - Server Report</h5>
                                                                                         
                                                                                         
<div class="verbatim" id="verbatim-215">
<div class="fancyvrb" id="fancyvrb215"><a 
 id="x17-691002r1"></a>&#x00A0;&#x00A0;void&#x00A0;dbsr(unsigned&#x00A0;level);</div></div>
<!--l. 1661--><p class="nopar" ><a 
 id="dx17-691003"></a>
</p><!--l. 1664--><p class="noindent" >This routine scans through the list of registered servers, printing the server&#8217;s name and then calling its report function if
one exists. This is an iocsh command that is intended to replace <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">casr</span></span></span>, and is only called on demand by the
user.
</p><!--l. 1667--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">15.9.2.2    </span> <a 
 id="x17-69200015.9.2.2"></a>dbServerClient - Identifying a client thread</h5>
                                                                                         
                                                                                         
<div class="verbatim" id="verbatim-216">
<div class="fancyvrb" id="fancyvrb216"><a 
 id="x17-692002r1"></a>&#x00A0;&#x00A0;int&#x00A0;dbServerClient(char&#x00A0;&#x22C6;pBuf,&#x00A0;size_t&#x00A0;bufSize);</div></div>
<!--l. 1671--><p class="nopar" ><a 
 id="dx17-692003"></a>
</p><!--l. 1674--><p class="noindent" >When the IOC processes a record that has its TPRO field set, this routine is called to obtain a server context
for the printed record name. It iterates through all of the registered servers in turn calling their <span class="obeylines-h"><span class="verb"><span 
class="pcrr7t-">client()</span></span></span>
routines until one of them returns OK or the end of the list is reached. If no server returns OK the routine returns
-1.
                                                                                         
                                                                                         
</p>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="AppDevGuidech16.html" >next</a>] [<a 
href="AppDevGuidech14.html" >prev</a>] [<a 
href="AppDevGuidech14.html#tailAppDevGuidech14.html" >prev-tail</a>] [<a 
href="AppDevGuidech15.html" >front</a>] [<a 
href="AppDevGuide.html#AppDevGuidech15.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailAppDevGuidech15.html"></a>  </p> 
</body></html> 
