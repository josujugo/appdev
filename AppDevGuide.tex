\documentclass{book}
\usepackage{html}
\usepackage{listings}

%begin{latexonly}
% -------- Preamble for pdflatex only --------

\usepackage{times}

% set margins
\usepackage[margin=1in]{geometry}
% left-align first line of new paragraph
\usepackage{parskip}

% make hyperlinks appear blue
\usepackage{hyperref}
\hypersetup{colorlinks, bookmarksnumbered, linkcolor=blue}

% indent all code sections
\usepackage{fancyvrb}
\RecustomVerbatimEnvironment{verbatim}{Verbatim}{xleftmargin=\leftmargini}

% mark overfull lines in the PDF output
% enable this for debugging only
%\overfullrule=1ex
%end{latexonly}

%begin{htmlonly}
% -------- Preamble for latex2html only --------

\htmlsetstyle[PRE.]{}{ margin-left=4em }
%end{htmlonly}

% -------- Preamble for both converters --------
\usepackage{longtable}
\usepackage{makeidx}
\makeindex

\ifx\HCode\undefined
\usepackage{graphicx}

% directories containing images
\graphicspath{ {diags/}{eps/} }
\else
\newcommand\includegraphics[1]{%
\Picture[#1.svg]{#1.svg}%
}%
\fi

% numbersubsubsections, reduce TOC depth
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{1}

% make all depths of list items use the same bullet
\renewcommand{\labelitemii}{\labelitemi}
\renewcommand{\labelitemiii}{\labelitemi}
\renewcommand{\labelitemiv}{\labelitemi}

% format and indent code listings
\lstset{basicstyle=\ttfamily,%
xleftmargin=\leftmargini,%
stringstyle=\textit,%
showstringspaces=false}

\lstdefinelanguage{dbd}{%
 morekeywords={path,addpath,include,%
  record,recordtype,field,info,alias,%
  asl,initial,promptgroup,prompt,special,pp,interest,base,size,extra,prop,%
  menu,choice,breaktable,%
  driver,device,registrar,variable},%
 sensitive=true,%
 morecomment=[l]{\#},%
 morecomment=[l]{\%},%
 morestring=[b]"%
}

\begin{document}

\addcontentsline{toc}{chapter}{EPICS Applications Developer's Guide}
\input{tex/titlepage.tex}

\tableofcontents
\addcontentsline{toc}{chapter}{Table of Contents}

\input{tex/introduction.tex}
\input{tex/gettingStarted.tex}
\input{tex/overview.tex}
\input{tex/epicsBuildFacility.tex}
\input{tex/lockScanProcess.tex}
\input{tex/databaseDefinition.tex}
\input{tex/iocInit.tex}
\input{tex/accessSecurity.tex}
\input{tex/test.tex}
\input{tex/errorLogging.tex}
\input{tex/recordSupport.tex}
\input{tex/deviceSupport.tex}
\input{tex/driverSupport.tex}
\input{tex/staticDatabaseAccess.tex}
\input{tex/runtimeDatabaseAccess.tex}
\input{tex/generalPurposeTasks.tex}
\input{tex/scanning.tex}
\input{tex/iocsh.tex}
\input{tex/libCom.tex}
\input{tex/libComOsi.tex}
\input{tex/registry.tex}
\input{tex/databaseStructures.tex}

\begin{latexonly}
\cleardoublepage
\phantomsection
\end{latexonly}

\addcontentsline{toc}{chapter}{Index}
\printindex

\end{document}
